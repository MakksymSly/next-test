(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{2022:(e,t,o)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return o(536)}])},536:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>D});var a=o(4848),r=o(7665),s=o(5072),l=o(2309),n=o(4335);let i="https://jsonplaceholder.typicode.com/todos",d=async()=>{await new Promise(e=>setTimeout(e,1e3));let e=await n.A.get("".concat(i,"?_limit=10"));return[...JSON.parse(localStorage.getItem("todos")||"[]"),...e.data]},u=async e=>{if(i)return{...(await n.A.post(i,{title:e,completed:!1})).data,id:Date.now()}},c=async e=>(await n.A.delete("".concat(i,"/").concat(e)),e),g=async(e,t,o)=>({...(await n.A.put("".concat(i,"/").concat(e),{title:t})).data,title:t,completed:o}),m=()=>{let e=(0,r.jE)(),{data:t,isPending:o,isError:a,error:n}=(0,s.I)({queryKey:["todos"],queryFn:d});return{todos:t,isPending:o,isError:a,error:n,addTodo:(0,l.n)({mutationFn:u,onMutate:async t=>{await e.cancelQueries({queryKey:["todos"]});let o=e.getQueryData(["todos"]),a={id:Date.now(),title:t,completed:!1,userId:Date.now()+1};return e.setQueryData(["todos"],function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[a,...e]}),{prevTodos:o}},onSuccess:t=>{let o=JSON.parse(localStorage.getItem("todos")||"[]");localStorage.setItem("todos",JSON.stringify([t,...o])),e.invalidateQueries({queryKey:["todos"]})},onError:(t,o,a)=>{(null==a?void 0:a.prevTodos)&&e.setQueryData(["todos"],a.prevTodos)}}),removeTodo:(0,l.n)({mutationFn:c,onMutate:async t=>{await e.cancelQueries({queryKey:["todos"]});let o=e.getQueryData(["todos"]);return e.setQueryData(["todos"],function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.filter(e=>e.id!==t)}),{prevTodos:o}},onSuccess:t=>{let o=JSON.parse(localStorage.getItem("todos")||"[]").filter(e=>e.id!==t);localStorage.setItem("todos",JSON.stringify(o)),e.invalidateQueries({queryKey:["todos"]})},onError:(t,o,a)=>{(null==a?void 0:a.prevTodos)&&e.setQueryData(["todos"],a.prevTodos)}}),editTodo:(0,l.n)({mutationFn:e=>{let{id:t,title:o,completed:a}=e;return g(t,o,a)},onMutate:async t=>{let{id:o,title:a,completed:r}=t;await e.cancelQueries({queryKey:["todos"]});let s=e.getQueryData(["todos"]);return e.setQueryData(["todos"],function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map(e=>e.id===o?{...e,title:a,completed:r}:e)}),{prevTodos:s}},onSuccess:t=>{let{id:o,title:a,completed:r}=t,s=JSON.parse(localStorage.getItem("todos")||"[]").map(e=>e.id===o?{...e,title:a,completed:r}:e);localStorage.setItem("todos",JSON.stringify(s)),e.invalidateQueries({queryKey:["todos"]})}})}};var p=o(6540),x=o(6812);let h=e=>{let{todo:t,currentTodoRef:o}=e,{editTodo:r,removeTodo:s}=m(),[l,n]=(0,p.useState)(!1),[i,d]=(0,p.useState)(t.title),[u,c]=(0,p.useState)(t.completed);return(0,p.useEffect)(()=>{l&&setTimeout(()=>{var e;null===(e=o.current)||void 0===e||e.focus()},0)},[l,o]),(0,a.jsxs)(x.P.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},exit:{opacity:0,x:50,transition:{duration:.3}},layout:!0,className:"flex items-center justify-between bg-white shadow-md p-4 rounded-lg border border-gray-200",children:[l?(0,a.jsx)("input",{value:i,onChange:e=>{d(e.target.value)},onBlur:e=>{e.stopPropagation(),r.mutate({id:t.id,title:i,completed:u}),n(!1)},ref:o,className:"text-lg"}):(0,a.jsx)("p",{className:"text-lg ".concat(t.completed?"line-through text-gray-500":"text-black"),children:t.title}),(0,a.jsxs)("div",{className:"flex gap-2",children:[l&&(0,a.jsx)("button",{onMouseDown:()=>{let e=JSON.parse(localStorage.getItem("todos")||"[]");localStorage.setItem("todos",JSON.stringify(e.map(e=>e.id==e.id?{...e,completed:!e.completed}:e))),c(!u)},className:"px-4 py-2 ".concat(t.completed?"bg-red-500 hover:bg-red-600":"bg-green-500 hover:bg-green-600"," transition text-white rounded-lg"),children:t.completed?"Uncomplete":"Complete"}),(0,a.jsx)("button",{onMouseDown:()=>{if(!l){var e;n(!0),null===(e=o.current)||void 0===e||e.focus();return}r.mutate({id:t.id,title:i,completed:u}),n(!1)},className:"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition",children:l?"Save":"Edit"}),(0,a.jsx)("button",{onClick:()=>{s.mutate(t.id)},className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition",children:"Delete"})]})]})};var y=o(9965),v=o.n(y),f=o(6297);let b=e=>{let{todos:t,isPending:o,currentTodoRef:r}=e;return(0,a.jsx)(f.N,{mode:"popLayout",children:(0,a.jsx)("div",{className:"space-y-2",children:o?(0,a.jsx)(v(),{src:"loading.svg",alt:"loading",width:50,height:50,className:"mx-auto pt-20"}):t.map(e=>(0,a.jsx)(h,{todo:e,currentTodoRef:r},e.id))})})},w=e=>{let{message:t}=e;return(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-red-500 rounded-xl",children:t})};var N=function(e){return e.ALL="all",e.ACTIVE="active",e.COMPLETED="completed",e}({});let j=[{value:N.ALL,title:"All"},{value:N.ACTIVE,title:"Active"},{value:N.COMPLETED,title:"Completed"}],S=()=>{let[e,t]=(0,p.useState)(""),[o,r]=(0,p.useState)(N.ALL),[s,l]=(0,p.useState)(""),n=(0,p.useRef)(null),{todos:i,isPending:d,isError:u,error:c,addTodo:g}=m(),x=()=>{e.trim()&&(g.mutate(e),t(""))},h=null==i?void 0:i.filter(e=>{switch(o){case N.ALL:return!0;case N.ACTIVE:return!e.completed;case N.COMPLETED:return e.completed;default:return!0}}).filter(e=>e.title.toLowerCase().includes(s.toLowerCase()));return(0,a.jsxs)("div",{className:"max-w-xl min-h-96 mx-auto p-4 bg-stone-50/20 rounded-2xl shadow-lg",children:[(0,a.jsx)("h1",{className:"text-3xl font-semibold text-center mb-4",children:"(˵ ͡~ ͜ʖ ͡\xb0˵)ﾉ⌒♡ TODO APP"}),(0,a.jsxs)("div",{className:"flex gap-2 mb-4",children:[(0,a.jsx)("input",{type:"text",placeholder:"Whatcha Gonna Do?",value:e,onChange:e=>t(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),x())},className:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400"}),(0,a.jsx)("button",{onClick:x,className:"".concat(e.trim()?"bg-green-500 hover:bg-green-500/80":"bg-gray-200 cursor-not-allowed"," text-white px-4 py-2 rounded-lg transition uppercase font-bold"),children:"just do it!"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xl mb-3",children:[(0,a.jsx)("p",{className:"font-semibold",children:"Filters:"}),j.map(e=>(0,a.jsx)("button",{onClick:()=>r(e.value),className:"px-4 py-2 rounded-lg font-semibold text-white transition-all shadow-md hover:shadow-lg ".concat(o===e.value?"bg-sky-500 hover:bg-sky-600":"bg-stone-500 hover:bg-stone-600"),children:e.title},e.title))]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xl mb-3",children:[(0,a.jsx)("p",{className:"font-semibold",children:"Search:"}),(0,a.jsx)("input",{value:s,onChange:e=>l(e.target.value),className:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400"})]}),u?(0,a.jsx)(w,{message:null==c?void 0:c.message}):(0,a.jsx)(b,{todos:null!=h?h:[],isPending:d,currentTodoRef:n})]})};function D(){return(0,a.jsx)("div",{className:"p-7",children:(0,a.jsx)(S,{})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[979,636,593,792],()=>t(2022)),_N_E=e.O()}]);
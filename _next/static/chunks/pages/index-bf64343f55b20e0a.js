(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{2022:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(3775)}])},3775:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>y});var n=a(4848),o=a(7665),s=a(5072),r=a(2309),l=a(4335);let d="https://jsonplaceholder.typicode.com/todos",i=async()=>(await new Promise(e=>setTimeout(e,1e3)),(await l.A.get("".concat(d,"?_limit=10"))).data),c=async e=>(await l.A.post(d,{title:e,completed:!1})).data,u=async e=>(await l.A.delete("".concat(d,"/").concat(e)),e),m=e=>{let{todo:t,removeTodo:a}=e;return(0,n.jsxs)("div",{className:"flex items-center justify-between bg-white shadow-md p-4 rounded-lg border border-gray-200",children:[(0,n.jsx)("p",{className:"text-lg ".concat(t.completed?"line-through text-gray-500":"text-black"),children:t.title}),(0,n.jsx)("button",{onClick:()=>a.mutate(t.id),className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition",children:"Delete"})]})};var h=a(9965),g=a.n(h);let p=e=>{let{todos:t,removeTodo:a,isPending:o}=e;return(0,n.jsx)("div",{className:"space-y-2",children:o?(0,n.jsx)(g(),{src:"loading.svg",alt:"loading",width:50,height:50,className:"mx-auto pt-20"}):t.map(e=>(0,n.jsx)(m,{todo:e,removeTodo:a},e.id))})};var x=a(6540);let w=()=>{let[e,t]=(0,x.useState)(""),a=e=>{t(e.target.value)},l=()=>{e.trim()&&(g.mutate(e),t(""))},d=(0,o.jE)(),{data:m,isPending:h}=(0,s.I)({queryKey:["todos"],queryFn:i}),g=(0,r.n)({mutationFn:c,onMutate:async e=>{await d.cancelQueries({queryKey:["todos"]});let t={id:Date.now(),title:e,completed:!1,userId:Date.now()+1};d.setQueryData(["todos"],e=>[t,...e])}}),w=(0,r.n)({mutationFn:u,onMutate:async e=>{await d.cancelQueries({queryKey:["todos"]}),d.setQueryData(["todos"],t=>t.filter(t=>t.id!==e))}});return(0,n.jsxs)("div",{className:"max-w-xl min-h-96 mx-auto p-4 bg-stone-50/20 rounded-2xl shadow-lg",children:[(0,n.jsx)("h2",{className:"text-xl font-semibold text-center mb-4",children:"Todo App"}),(0,n.jsxs)("div",{className:"flex gap-2 mb-4",children:[(0,n.jsx)("input",{type:"text",placeholder:"Whatcha Gonna Do?",value:e,onChange:e=>a(e),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),l())},className:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400"}),(0,n.jsx)("button",{onClick:l,className:"\n            ".concat(e.trim()?"bg-green-500 hover:bg-green-500/80":"bg-gray-200 cursor-not-allowed"," \n           text-white px-4 py-2 rounded-lg transition uppercase font-bold\n"),children:"just do it!"})]}),(0,n.jsx)(p,{todos:m,isPending:h,removeTodo:w})]})};function y(){return(0,n.jsx)("div",{className:"p-7 bg-stone-200/30 w-screen h-screen",children:(0,n.jsx)(w,{})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[62,636,593,792],()=>t(2022)),_N_E=e.O()}]);